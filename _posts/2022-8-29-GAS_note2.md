---
layout: post
title: "GAS笔记2——使用"
date: 2022-8-29
categories: UE4
tags: GAS
excerpt: 实际在项目中使用GAS
author: Tizeng
published: true
---

* content
{:toc}


主要参考[GASDocument](github.com/tranek/GASDocumentation)项目。

## 初始化

ASC需要知道OwnerActor（实际持有ASC的Actor）和AvatarActor（玩家控制的Actor）来初始化，它们可以是同一个，如果我们需要玩家死亡复活后仍旧保留之前的属性等数据，那么ASC一般放在PlayerState上。然后在`PossessedBy`（服务器）和`OnRep_PlayerState`（客户端）上分别调用初始化函数，告知ASC前面两个Actor。

属性初始化一般是定义一个GE来完成，在ASC和属性集初始化完毕后就可以将其Apply到角色身上。

## Meta Attribute（GASDocument 4.3.3）

属性集中可以定义一些占位符（placeholder）属性，称为Meta属性，它的目的是和其他属性进行交互，如常见的伤害，我们把伤害作为一个单独的属性，角色收到伤害时就去修改这个属性，然后属性集中检测到它的变化后就去做处理，如减少HP，这样就可以把伤害计算和伤害处理的逻辑分离开。

## 遇到的问题

* 将跳跃做成技能后客户端始终没有表现，只看得到属性变化了，查了半天发现是Activate的时候判断了`HasAuthority`，因此只在服务器调用了，而文档项目中使用的是`HasAuthorityOrPredictionKey`。
