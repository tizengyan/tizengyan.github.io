---
layout: post
title: "Gaia笔记7——Gameplay"
date: 2022-4-29
categories: UE4
tags: gaia
excerpt: 一些Gameplay的功能模块
author: Tizeng
published: false
---

* content
{:toc}


## 辅助瞄准优化（2022.4.13）

增加开枪时准心往附近npc移动的功能

## 3D路径显示（2022.4.21）

NavMesh得到路径
（寻路实现）
生成indicator
调整indicator方向
路径更新优化、维护
LineTrace得到正确Z坐标

## 开枪流程（2022.4.29）

1. inputid通知控制人物状态的StateComponent，执行开枪GA（ActivateAbility）
2. GA执行开枪逻辑并广播事件，同时角色Actor设定开枪延迟Timer
3. Timer到时间角色Actor通知武器Actor开枪
4. 武器Actor身上处理开火的组件FireComponent创建子弹Projectile，子弹身上的移动组件驱动其运动并检测碰撞
5. 角色Actor判断是否继续开枪，如果不是则停止开枪，终止开枪GA（EndAbility）

开枪的GA是众多FSMGA中的一个

单发连发靠DT中的一个配置来区分

### 子弹创建的位置



## 伤害流程（2022.5.1）

1. 生成的子弹实例Actor经过碰撞检测后，在PlayerController的待处理子弹队列中加入碰撞信息
2. PlayerController每隔一段时间检测是否有需要处理的子弹信息，如果有则对目标Actor上一个伤害GE
3. 伤害GE事先配置在角色Actor上，GE上配置的Execution
